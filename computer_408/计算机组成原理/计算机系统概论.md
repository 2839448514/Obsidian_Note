## 1.1 计算机系统

计算机系统由“**软件**”和“**硬件**”两大部分组成。

**计算机软件**分为两大类：

- **系统软件**：用来管理整个计算机系统。
- **应用软件**：按任务需要编织成各种程序。

---

### **系统软件**

系统软件又称为系统程序，主要用来管理整个计算机系统，监视服务，使系统资源得到合理调度，保证系统的高效运行。

### **应用软件**

应用软件又称为应用程序，是用户根据任务需要编制的各种应用程序。

---

### **计算机系统的层次结构**

![[计算机体系结构]]

---

## 1.2 冯诺伊曼计算机的特点

### 冯诺依曼计算机的特点

- 计算机由**运算器，存储器，控制器，输入设备，输出设备**五大设备组成。
- 指令和数据以同等地位存放于存储器内，并可以按地址寻访。
- 指令和数据均用二进制数表示。
- 指令由操作码和地址码组成，操作码用来表示操作的性质，地址码用来表示操作数在存储器中的位置。
- 指令在存储器中按顺序存放。
- 机器指令以运算器为中心，输入设备与存储器间的数据传送通过运算器完成。
**冯诺依曼计算机结构是以运算器为中心的，而现代计算机已经转换为以存储器为中心的**

![[冯诺依曼计算机结构]]

**以以存储器为中心的现代计算机**

![[以存储器为中心的计算机]]

图中各部件的功能如下：

**运算器**：用来完成算术运算和逻辑运算，并将运算的中间结果暂存在运算器内。

**存储器**：存储器用来存放数据和程序。存储器可以分为**主存储器**和**辅助存储器**。

**控制器**：控制器用来控制、指挥程序和数据的输入，运行以及处理运算结果。

**输入设备**：用来将人们熟悉的信息形式转换为机器能识别的信息形式。

**输出设备**：可以将机器运算结果转换为人们熟悉的信息形式。

### 现代计算机硬件框图

![[现代计算机硬件框图]]

**现代计算机可以认为由三大部分组成：CPU，I/O设备，以及主存储器。**

**CPU和主存储器合起来叫主机，I/O设备和主机又可称为外部设备。**

## 1.3 计算机工作步骤（解决问题）

![[细化的计算机组成框架]]

### 主存储器

**主存储器**（简称主存或内存），包含存储体M，各种逻辑部件以及控制电路。**存储体**由许多存储单元组成，每一个存储单元又包含若干存储元件，每个存储元件能寄存一位二进制代码"0"或"1"。**一个存储单元**：可存储一串二进制代码，称这串二进制代码为一个存储字，这串二进制代码的位数称为存储字长。
**例如：MAR=4位，总共有$x^4$个存储单元。MDR=16位，每一个存储单元可存放16bit。**
**1B=1个字节，1b=1bit**。

### 运算器

#### **1. ACC（Accumulator）**

- **功能**：累加器（ACC）是运算器中的一个寄存器，用来存储算术运算和逻辑运算的结果。
- **作用**：它通常用于存放加法、乘法等算术运算的中间结果，并且是与运算器的其他部分进行数据交换的主要寄存器。

#### **2. MQ（Multiplier Quotient）**

- **功能**：乘法商寄存器（MQ）是运算器中用于存储乘法操作结果的寄存器。
- **作用**：在乘法操作中，MQ寄存器存放一个操作数或操作的部分结果，它通常与ACC配合使用，以存储最终的乘积结果。

#### **3. X（Temporary Register）**

- **功能**：X寄存器是一个临时寄存器，常用于存储中间计算结果，特别是在一些复合运算或多步骤计算中。
- **作用**：它的作用是暂时保存数据，以供后续运算使用，通常在数据移动和运算过程中被频繁使用。

#### **4. ALU（Arithmetic and Logic Unit）**

- **功能**：算术逻辑单元（ALU）是运算器的核心部件，负责执行所有的算术和逻辑运算。
- **作用**：
    - **算术运算**：执行加法、减法、乘法、除法等运算。
    - **逻辑运算**：执行与、或、非、异或等操作。
    - ALU通过控制信号执行指令，并与寄存器（如ACC、MQ等）之间交换数据。

### 控制器

#### **1. CU（Control Unit）**

- **功能**：控制器（CU）是计算机中的核心部件之一，负责协调和控制计算机各个部件的工作。
- **作用**：
    - 解码指令：从内存中取出指令并对其进行解码，生成相应的控制信号。
    - 控制信号生成：根据指令的类型，CU生成控制信号，指导运算器、存储器以及输入输出设备等的操作。
    - 顺序控制：控制指令的执行顺序，确保各个部件按照正确的时序工作。

#### **2. IR（Instruction Register）**

- **功能**：指令寄存器（IR）是用来存储当前正在执行的指令的寄存器。
- **作用**：
    - **存储指令**：从内存中取出的指令被加载到IR中。
    - **指令解码**：CU通过IR中的指令来解码，并根据解码结果生成控制信号，指挥其他部件执行相应的操作。

#### **3. PC（Program Counter）**

- **功能**：程序计数器（PC）是一个特殊的寄存器，存储下一条要执行指令的内存地址。
- **作用**：
    - **指令地址跟踪**：PC的值指示下一条指令的地址，控制指令执行的顺序，并且由自动加1功能。
    - **指令跳转**：当发生跳转、分支等操作时，PC会根据控制信号更新为新的指令地址，跳转到程序的指定位置。

### **完成一条指令的执行过程**

完成一条指令的执行涉及多个步骤和硬件部件的配合。以下是计算机执行一条指令的基本过程：

#### **1. 取指阶段（Instruction Fetch）**

- **PC（程序计数器）**：程序计数器（PC）中保存的是下一条要执行指令的内存地址。在这一阶段，CPU从内存中获取指令。
- **指令寄存器（IR）**：获取的指令存储在指令寄存器（IR）中，以便后续的解码和执行。

#### **2. 解码阶段（Instruction Decode）**

- **控制器（CU）**：控制器从指令寄存器（IR）中读取指令，并根据指令的操作码（Opcode）解码。解码的结果决定了接下来需要执行的操作。
    - 控制器根据解码的结果生成控制信号，指示ALU、寄存器、内存等组件执行相应的操作。

#### **3. 执行阶段（Execute）**

- **算术逻辑单元（ALU）**：如果指令需要进行算术或逻辑运算，控制器将信号传递给ALU，ALU执行加法、减法、与、或等运算。
- **寄存器**：操作数可能从寄存器中获取，或者ALU的运算结果会存储回寄存器。
- **内存**：如果指令是内存操作（如加载、存储），控制器会通过内存管理单元（MMU）进行数据的读写。

#### **4. 写回阶段（Write Back）**

- **寄存器**：执行完指令后，计算结果（如运算结果、存储的数据等）可能被写回到寄存器中。
- **内存**：对于需要存储结果的指令，结果将写回到内存指定的地址。

#### **5. 更新程序计数器（PC）**

- **PC更新**：指令执行完毕后，程序计数器（PC）根据指令的类型进行更新。通常，PC会增加，指向下一条指令。如果遇到跳转指令（如条件跳转、无条件跳转），PC会根据跳转目标更新为新的地址。

#### **6. 跳转回取指阶段（Repeat Fetch）**

- 执行完当前指令后，计算机准备取下一条指令。此时，程序计数器（PC）更新为新指令的地址，取指阶段重新开始。
