## 手写栈


```c++
#include <iostream>
using namespace std;
typedef long long ll;
const int N = 1e5 + 10;
typedef struct mytack
{
    char data[N];
    int t = 0;
    void push(char x) { data[++t] = x; };
    char top() { return data[t]; };
    void pop() { t--; };
    bool empty() { return t == 0 ? 1 : 0; };
} mystack;
int main()
{
    int n;
    cin >> n;
    getchar();
    mystack s;
    while (n--)
    {
        while (true)
        {
            char ch = getchar();
            if (ch == ' ' || ch == '\n' || ch == EOF)
            {
                while (!s.empty())
                {
                    cout << s.top();
                    s.pop();
                }
                if (ch == '\n' || ch == EOF)
                {
                    cout << endl;
                    break;
                }
            }
            else
            {
                s.push(ch);
            }
        }
    }
    return 0;
}
```
## 卡特兰数

## 1. 定义
卡特兰数是一个数列，通常表示为 \( C_n \)，其前几项如下（从第零项开始）：

```

C0 = 1, C1 = 1, C2 = 2, C3 = 5, C4 = 14, C5 = 42, C6 = 132, C7 = 429, C8 = 1430, C9 = 4862, C10 = 16796, C11 = 58786, C12 = 208012, C13 = 742900, C14 = 2674440, C15 = 9694845, C16 = 35357670, C17 = 129644790, C18 = 477638700, C19 = 1767263190, C20 = 6564120420, ...

```

## 2. 卡特兰数公式

### 通项公式1（通过组合数表示）：
$$
C_n = \frac{1}{n+1} \binom{2n}{n} = \frac{(2n)!}{(n+1)!n!}
$$
该公式表示第 \( n \) 项卡特兰数与组合数 \( \binom{2n}{n} \) 的关系，并通过因子 \( n+1 \) 调整。

### 通项公式2（通过求和表示）：
$$
C_n = \frac{1}{n+1} \sum_{i=0}^{n} \binom{n}{i}^2
$$
这个公式通过求和的方式，表示了卡特兰数与二项式系数的平方和之间的关系。

### 递推公式1：
$$
C_{n+1} = \frac{2(2n+1)}{n+2} C_n
$$
递推公式用于通过已知的 \( $C_n$ \) 计算出 \( $C_{n+1}$ \)。

### 递推公式2：
$$
C_{n+1} = \sum_{i=0}^{n} C_i C_{n-i}
$$
递推公式表示 ( $C_{n+1}$ ) 可以通过前面已知的卡特兰数求和得到。

```cpp
ll f[3055];

int main()
{
    ios::sync_with_stdio(false);
    cin.tie(0);

    int n;
    cin >> n;
    f[0] = 1;
    f[1] = 1;
    for (int i = 2; i <= n; i++)
    {
        ll sum = 0;
        for (int j = 0; j <= i; j++)
        {
            sum += f[j] * f[i - j - 1];
            sum %= 100000007;
        }
        f[i] = sum;
    }
    cout << f[n] << endl;
    return 0;
}
```
## 3. 卡特兰数的性质

卡特兰数的一个重要性质是：
$$
C_n = \binom{2n}{n} - \binom{2n}{n-1}
$$
这意味着卡特兰数可以通过组合数的差来计算。

## 4. 渐近增长

卡特兰数的渐近增长公式为：
$$
C_n \sim \frac{4^n}{n^{\frac{3}{2}} \sqrt{\pi}}
$$
这表示卡特兰数的增长速度接近于 \( 4^n \) 除以 \( n^{\frac{3}{2}} \sqrt{\pi} \)，随着 \( n \) 的增加，卡特兰数增长得非常快。

---

### **卡特兰数的定义**

卡特兰数 $H_n$​ 是一类在数学中广泛应用的数列，常用于组合问题。它的标准公式为：

$$
H_n = \frac{\binom{2n}{n}}{n+1} \quad (n \geq 2, n \in \mathbb{N}^+)
$$

### 2. **卡特兰数的递推公式**

- **递推关系式**：

$$
H_n = \sum_{i=1}^{n} H_{i-1} H_{n-i} \quad (n \geq 2, n \in \mathbb{N}^+)
$$

- **简化递推公式**：

$$
H_n = \frac{H_{n-1}(4n-2)}{n+1}
$$

- **另一种计算公式**：

$$
H_n = \binom{2n}{n} - \binom{2n}{n-1}
$$

| \( H_0 \) | \( H_1 \) | \( H_2 \) | \( H_3 \) | \( H_4 \) | \( H_5 \) | \( H_6 \) | ... |
|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|-----|
|     1     |     1     |     2     |     5     |    14     |    42     |   132     | ... |

### 3. **卡特兰数的应用问题**

卡特兰数可以解决多种组合问题，以下是一些典型的应用：

1. **票务问题：**
	
	- 有 2n 个人排队入场，入场费 5 元。n 个人有一张 5 元票，另 n 人只有 10 元票，要求售票员尽量少的人购买票，且售票员只有 5 元零钱，问有多少种方法使得 10 元票的人能够买票。
2. **路径问题：**
	
	- 有一个大小为 $n \times n$ 的格子图，左下角为 (0, 0)，右上角为 (n, n)，从左下角到右上角只能向右或向上走，问从左下角到右上角有多少条路径。
3. **非交叉线段问题：**
	
	- 在已选择的 2n 个点中，将这些点按顺序连接起来，使得所有得到的线段不相交的方案有多少种。
4. **凸多边形分割问题：**
	
	- 对有线条不相交的情况，将一个凸多边形区域分成三角区域的方案数。
5. **栈的出栈序列问题：**
	
	- 一个栈（无穷大）的进栈序列为 $1, 2, 3, \dots, n$，有多少个不同的出栈序列？
6. **二叉树构造问题：**
	
	- n 个点可以构造多少个不同的二叉树？
7. **组合数列问题：**
	
	- 由 n 个 +1 和 n 个 -1 组成的 2n 个数 $a_1, a_2, \dots, a_{2n}$​，其中部分和满足 $a_1 + a_2 + \dots + a_k \geq 0$，有多少个满足条件的数列？

### 代码实现

```cpp
#include <iostream>
using namespace std;
int n;
long long f[25];
int main() {
  f[0] = 1;
  cin >> n;
  for (int i = 1; i <= n; i++) f[i] = f[i - 1] * (4 * i - 2) / (i + 1);
  cout << f[n] << endl;
  return 0;
}
```
